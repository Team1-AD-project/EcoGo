# ğŸ” å¯†ç åŠŸèƒ½ä¸ç™»å½•æµç¨‹æ›´æ–°å®Œæˆ

## âœ… æ›´æ–°æ¦‚è§ˆ

æˆåŠŸæ·»åŠ äº†**å¯†ç è®¾ç½®åŠŸèƒ½**å’Œ**ç™»å½•éªŒè¯æµç¨‹**ï¼

---

## ğŸ¯ æ›´æ–°å†…å®¹

### 1ï¸âƒ£ æ³¨å†Œç¯èŠ‚æ·»åŠ å¯†ç è®¾ç½® âœ…

**ä½ç½®**: Step 0 - ä¸ªäººä¿¡æ¯å¡«å†™é¡µé¢

**æ–°å¢å­—æ®µ**:
- âœ… **Password** - å¯†ç è¾“å…¥æ¡†ï¼ˆè‡³å°‘6ä¸ªå­—ç¬¦ï¼‰
- âœ… **Confirm Password** - ç¡®è®¤å¯†ç è¾“å…¥æ¡†
- âœ… å¯†ç å¯è§æ€§åˆ‡æ¢ï¼ˆçœ¼ç›å›¾æ ‡ï¼‰
- âœ… å®æ—¶å¯†ç åŒ¹é…éªŒè¯

**éªŒè¯è§„åˆ™**:
```kotlin
å¯†ç é•¿åº¦ >= 6 å­—ç¬¦
ç¡®è®¤å¯†ç å¿…é¡»åŒ¹é…
æ‰€æœ‰å­—æ®µéªŒè¯é€šè¿‡æ‰èƒ½ç»§ç»­
```

---

### 2ï¸âƒ£ æ³¨å†Œå®Œæˆåè·³è½¬ç™»å½•é¡µé¢ âœ…

**æµç¨‹å˜æ›´**:

#### æ—§æµç¨‹
```
æ³¨å†Œå®Œæˆ â†’ ç›´æ¥è¿›å…¥é¦–é¡µ
```

#### æ–°æµç¨‹
```
æ³¨å†Œå®Œæˆ â†’ ä¿å­˜æ•°æ® â†’ è·³è½¬åˆ°ç™»å½•é¡µé¢ â†’ ç”¨æˆ·è¾“å…¥å‡­è¯ â†’ éªŒè¯æˆåŠŸ â†’ è¿›å…¥é¦–é¡µ/å¼•å¯¼
```

---

### 3ï¸âƒ£ ç™»å½•éªŒè¯åŠŸèƒ½ âœ…

**LoginFragment.kt æ›´æ–°**:

- âœ… éªŒè¯ç”¨æˆ·è¾“å…¥çš„ NUSNET ID å’Œå¯†ç 
- âœ… ä¸ä¿å­˜çš„æ³¨å†Œä¿¡æ¯æ¯”å¯¹
- âœ… éªŒè¯æˆåŠŸåæ ‡è®°ç”¨æˆ·å·²ç™»å½•
- âœ… æ£€æŸ¥æ˜¯å¦é¦–æ¬¡ç™»å½•ï¼Œå†³å®šæ˜¾ç¤ºå¼•å¯¼è¿˜æ˜¯ç›´æ¥è¿›å…¥é¦–é¡µ

**éªŒè¯é€»è¾‘**:
```kotlin
1. æ£€æŸ¥æ˜¯å¦å·²æ³¨å†Œ
2. éªŒè¯ NUSNET ID æ˜¯å¦åŒ¹é…
3. éªŒè¯å¯†ç æ˜¯å¦åŒ¹é…
4. æ£€æŸ¥é¦–æ¬¡ç™»å½•çŠ¶æ€
   - é¦–æ¬¡ç™»å½• â†’ æ˜¾ç¤ºåŠŸèƒ½å¼•å¯¼
   - éé¦–æ¬¡ç™»å½• â†’ ç›´æ¥è¿›å…¥é¦–é¡µ
```

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### 1. fragment_signup_wizard.xml âœ…
**ä½ç½®**: `android-app/app/src/main/res/layout/fragment_signup_wizard.xml`

**ä¿®æ”¹**:
- âœ… æ·»åŠ å¯†ç è¾“å…¥æ¡†ï¼ˆå¸¦å›¾æ ‡å’Œå¯è§æ€§åˆ‡æ¢ï¼‰
- âœ… æ·»åŠ ç¡®è®¤å¯†ç è¾“å…¥æ¡†
- âœ… è°ƒæ•´å¸ƒå±€é—´è·

### 2. SignupWizardFragment.kt âœ…
**ä½ç½®**: `android-app/app/src/main/kotlin/com/ecogo/ui/fragments/SignupWizardFragment.kt`

**ä¿®æ”¹**:
- âœ… æ·»åŠ  `password` å˜é‡
- âœ… æ›´æ–° `validatePersonalInfo()` æ·»åŠ å¯†ç éªŒè¯
- âœ… æ›´æ–° `saveRegistrationData()` ä¿å­˜å¯†ç 
- âœ… æ›´æ–° `completeSignup()` è·³è½¬åˆ°ç™»å½•é¡µé¢
- âœ… ä¿®æ”¹Toastæç¤ºä¿¡æ¯

### 3. LoginFragment.kt âœ…
**ä½ç½®**: `android-app/app/src/main/kotlin/com/ecogo/ui/fragments/LoginFragment.kt`

**ä¿®æ”¹**:
- âœ… æ·»åŠ å‡­è¯éªŒè¯é€»è¾‘
- âœ… ä»SharedPreferencesè¯»å–ä¿å­˜çš„è´¦å·ä¿¡æ¯
- âœ… éªŒè¯è¾“å…¥çš„NUSNET IDå’Œå¯†ç 
- âœ… å¤„ç†é¦–æ¬¡ç™»å½•/éé¦–æ¬¡ç™»å½•çš„å¯¼èˆª
- âœ… æ·»åŠ é”™è¯¯æç¤º

### 4. ic_key.xml ğŸ†•
**ä½ç½®**: `android-app/app/src/main/res/drawable/ic_key.xml`

**æ–°å¢**:
- âœ… å¯†ç è¾“å…¥æ¡†å›¾æ ‡

---

## ğŸ”„ å®Œæ•´æ³¨å†Œç™»å½•æµç¨‹

### æ³¨å†Œæµç¨‹
```
1. ç‚¹å‡» Register
2. å¡«å†™ä¸ªäººä¿¡æ¯ï¼ˆå«å¯†ç ï¼‰
   - ç”¨æˆ·åï¼ˆè‡³å°‘3å­—ç¬¦ï¼‰
   - é‚®ç®±ï¼ˆæ ¼å¼éªŒè¯ï¼‰
   - NUSNET IDï¼ˆeå¼€å¤´ï¼Œè‡³å°‘7å­—ç¬¦ï¼‰
   - å¯†ç ï¼ˆè‡³å°‘6å­—ç¬¦ï¼‰âœ… æ–°å¢
   - ç¡®è®¤å¯†ç ï¼ˆå¿…é¡»åŒ¹é…ï¼‰âœ… æ–°å¢
3. é€‰æ‹©å­¦é™¢
4. é€‰æ‹©äº¤é€šåå¥½
5. å¡«å†™å¸¸ç”¨åœ°ç‚¹
6. è®¾ç½®å…´è¶£ç›®æ ‡
7. æŸ¥çœ‹å°ç‹®å­å±•ç¤º
8. æ³¨å†Œå®Œæˆ â†’ è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ âœ… æ–°å¢
```

### ç™»å½•æµç¨‹
```
1. åœ¨ç™»å½•é¡µé¢è¾“å…¥å‡­è¯
   - NUSNET ID
   - å¯†ç 
2. ç‚¹å‡» Sign In
3. ç³»ç»ŸéªŒè¯ï¼šâœ… æ–°å¢
   - æ£€æŸ¥æ˜¯å¦å·²æ³¨å†Œ
   - éªŒè¯NUSNET IDæ˜¯å¦åŒ¹é…
   - éªŒè¯å¯†ç æ˜¯å¦åŒ¹é…
4. éªŒè¯æˆåŠŸï¼š
   - æ ‡è®°ç”¨æˆ·å·²ç™»å½•
   - æ£€æŸ¥é¦–æ¬¡ç™»å½•çŠ¶æ€
     â†’ é¦–æ¬¡ç™»å½•ï¼šæ˜¾ç¤ºåŠŸèƒ½å¼•å¯¼ï¼ˆ5é¡µï¼‰
     â†’ éé¦–æ¬¡ç™»å½•ï¼šç›´æ¥è¿›å…¥é¦–é¡µ
5. éªŒè¯å¤±è´¥ï¼šæ˜¾ç¤ºé”™è¯¯æç¤º
```

---

## ğŸ’¾ æ•°æ®å­˜å‚¨

### SharedPreferences (EcoGoPrefs)

```kotlin
// è´¦æˆ·å‡­è¯
nusnet_id: String           // NUSNET ID
password: String            // å¯†ç ï¼ˆæ³¨æ„ï¼šå®é™…åº”ç”¨åº”åŠ å¯†å­˜å‚¨ï¼‰âœ… æ–°å¢

// æ³¨å†ŒçŠ¶æ€
is_registered: Boolean      // æ˜¯å¦å·²æ³¨å†Œ âœ… æ–°å¢
is_logged_in: Boolean       // æ˜¯å¦å·²ç™»å½• âœ… æ–°å¢
is_first_login: Boolean     // æ˜¯å¦é¦–æ¬¡ç™»å½•

// ç”¨æˆ·ä¿¡æ¯
username: String
email: String
faculty: String
transport_prefs: Set<String>
dormitory: String
teaching_building: String
study_spot: String
other_locations: Set<String>
interests: Set<String>
weekly_goal: Int
notify_challenges: Boolean
notify_reminders: Boolean
notify_friends: Boolean
```

---

## ğŸ¨ UI æ›´æ–°

### ä¸ªäººä¿¡æ¯é¡µé¢
```
[ç”¨æˆ·åè¾“å…¥æ¡†]
[é‚®ç®±è¾“å…¥æ¡†]
[NUSNET IDè¾“å…¥æ¡†]
[å¯†ç è¾“å…¥æ¡†] â† æ–°å¢ï¼ˆå¸¦çœ¼ç›å›¾æ ‡åˆ‡æ¢å¯è§æ€§ï¼‰
[ç¡®è®¤å¯†ç è¾“å…¥æ¡†] â† æ–°å¢ï¼ˆå¸¦çœ¼ç›å›¾æ ‡åˆ‡æ¢å¯è§æ€§ï¼‰

[Next: Choose Faculty æŒ‰é’®]
```

### ç™»å½•é¡µé¢ï¼ˆéªŒè¯å¢å¼ºï¼‰
```
[NUSNET IDè¾“å…¥æ¡†]
[å¯†ç è¾“å…¥æ¡†]

[Sign In æŒ‰é’®] â† æ·»åŠ éªŒè¯é€»è¾‘
[Register æŒ‰é’®]
```

---

## âœ¨ éªŒè¯æç¤ºä¿¡æ¯

### æ³¨å†Œé¡µé¢
- âœ… "Username must be at least 3 characters"
- âœ… "Invalid email format"
- âœ… "Must start with 'e' and be at least 7 characters"
- âœ… **"Password must be at least 6 characters"** ğŸ†•
- âœ… **"Passwords do not match"** ğŸ†•

### ç™»å½•é¡µé¢
- âœ… **"Please enter NUSNET ID and password"** ğŸ†•
- âœ… **"No account found. Please register first."** ğŸ†•
- âœ… **"Incorrect NUSNET ID or password"** ğŸ†•
- âœ… **"Welcome back! ğŸ‰"** ï¼ˆæˆåŠŸç™»å½•ï¼‰ğŸ†•

### æ³¨å†Œå®Œæˆ
- âœ… **"Registration successful! Please login with your credentials ğŸ‰"** ğŸ†•

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æµ‹è¯•æ³¨å†Œæµç¨‹
```
1. å¯åŠ¨åº”ç”¨
2. ç‚¹å‡» Register
3. å¡«å†™ä¸ªäººä¿¡æ¯ï¼š
   - ç”¨æˆ·å: testuser
   - é‚®ç®±: test@example.com
   - NUSNET ID: e0123456
   - å¯†ç : test123 âœ… æ–°å¢
   - ç¡®è®¤å¯†ç : test123 âœ… æ–°å¢
4. æµ‹è¯•éªŒè¯ï¼š
   - å¯†ç å°‘äº6ä½ â†’ æ˜¾ç¤ºé”™è¯¯
   - ç¡®è®¤å¯†ç ä¸åŒ¹é… â†’ æ˜¾ç¤ºé”™è¯¯
   - å…¨éƒ¨æ­£ç¡® â†’ æŒ‰é’®å¯ç”¨
5. å®Œæˆåç»­æ­¥éª¤
6. æŸ¥çœ‹æ˜¯å¦è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ âœ… æ–°å¢
```

### 2. æµ‹è¯•ç™»å½•éªŒè¯
```
1. åœ¨ç™»å½•é¡µé¢è¾“å…¥ï¼š
   - NUSNET ID: e0123456
   - å¯†ç : test123
2. ç‚¹å‡» Sign In
3. éªŒè¯ç»“æœï¼š
   - é¦–æ¬¡ç™»å½• â†’ æ˜¾ç¤ºåŠŸèƒ½å¼•å¯¼
   - éé¦–æ¬¡ç™»å½• â†’ ç›´æ¥è¿›å…¥é¦–é¡µ

4. æµ‹è¯•é”™è¯¯æƒ…å†µï¼š
   - é”™è¯¯çš„NUSNET ID â†’ æ˜¾ç¤ºé”™è¯¯æç¤º
   - é”™è¯¯çš„å¯†ç  â†’ æ˜¾ç¤ºé”™è¯¯æç¤º
   - æœªæ³¨å†Œçš„è´¦å· â†’ æ˜¾ç¤ºæ³¨å†Œæç¤º
```

### 3. æŸ¥çœ‹æ—¥å¿—
```bash
# LogCatè¿‡æ»¤ "DEBUG_SIGNUP" å’Œ "DEBUG_LOGIN"
# åº”è¯¥çœ‹åˆ°ï¼š

# æ³¨å†Œæ—¶ï¼š
Password saved: true
Registration data saved to SharedPreferences

# ç™»å½•æ—¶ï¼š
Login successful
First login, showing onboarding  // æˆ–
Not first login, going to home
```

---

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

### âš ï¸ å½“å‰å®ç°
```kotlin
// å¯†ç ä»¥æ˜æ–‡å­˜å‚¨åœ¨SharedPreferences
putString("password", password)
```

### ğŸ”’ ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **å¯†ç åŠ å¯†å­˜å‚¨**
```kotlin
import java.security.MessageDigest

fun hashPassword(password: String): String {
    val bytes = MessageDigest.getInstance("SHA-256").digest(password.toByteArray())
    return bytes.joinToString("") { "%02x".format(it) }
}

// ä¿å­˜æ—¶
putString("password", hashPassword(password))

// éªŒè¯æ—¶
val savedPasswordHash = prefs.getString("password", "")
val inputPasswordHash = hashPassword(inputPassword)
if (inputPasswordHash == savedPasswordHash) { /* éªŒè¯æˆåŠŸ */ }
```

2. **ä½¿ç”¨åç«¯API**
- ä¸åœ¨æœ¬åœ°å­˜å‚¨å¯†ç 
- ä½¿ç”¨JWT tokenè¿›è¡Œèº«ä»½éªŒè¯
- åç«¯éªŒè¯å‡­è¯

3. **ä½¿ç”¨Android Keystore**
- å®‰å…¨å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- ç¡¬ä»¶æ”¯æŒçš„åŠ å¯†

---

## ğŸ“Š æµç¨‹å¯¹æ¯”

### æ—§æµç¨‹
```
æ³¨å†Œ â†’ 6æ­¥æ”¶é›†ä¿¡æ¯ â†’ ç›´æ¥è¿›å…¥é¦–é¡µ
ç™»å½• â†’ æ— éªŒè¯ â†’ ç›´æ¥è¿›å…¥é¦–é¡µ
```

### æ–°æµç¨‹ âœ…
```
æ³¨å†Œ â†’ 6æ­¥æ”¶é›†ä¿¡æ¯ï¼ˆå«å¯†ç è®¾ç½®ï¼‰â†’ è·³è½¬åˆ°ç™»å½•é¡µé¢
ç™»å½• â†’ éªŒè¯å‡­è¯ â†’ é¦–æ¬¡ç™»å½•æ£€æµ‹ â†’ å¼•å¯¼/é¦–é¡µ
```

---

## ğŸ‰ æ€»ç»“

### å·²å®ç°åŠŸèƒ½
- âœ… æ³¨å†Œæ—¶è®¾ç½®å¯†ç ï¼ˆ6å­—ç¬¦ä»¥ä¸Šï¼‰
- âœ… ç¡®è®¤å¯†ç éªŒè¯ï¼ˆå¿…é¡»åŒ¹é…ï¼‰
- âœ… å¯†ç å¯è§æ€§åˆ‡æ¢
- âœ… æ³¨å†Œå®Œæˆè·³è½¬åˆ°ç™»å½•é¡µé¢
- âœ… ç™»å½•å‡­è¯éªŒè¯
- âœ… é¦–æ¬¡ç™»å½•/éé¦–æ¬¡ç™»å½•å¤„ç†
- âœ… å®Œæ•´çš„é”™è¯¯æç¤º

### æ•°æ®å®‰å…¨
- âš ï¸ å½“å‰ä¸ºå¼€å‘ç¯å¢ƒï¼Œå¯†ç æ˜æ–‡å­˜å‚¨
- ğŸ“ ç”Ÿäº§ç¯å¢ƒéœ€è¦åŠ å¯†å­˜å‚¨æˆ–ä½¿ç”¨åç«¯API

### ä¸‹ä¸€æ­¥å»ºè®®
1. å®ç°å¯†ç åŠ å¯†å­˜å‚¨
2. æ·»åŠ "å¿˜è®°å¯†ç "åŠŸèƒ½
3. å®ç°åç«¯APIéªŒè¯
4. æ·»åŠ è´¦å·æ³¨é”€åŠŸèƒ½
5. å®ç°è®°ä½ç™»å½•çŠ¶æ€ï¼ˆ30å¤©ï¼‰

---

**æ‰€æœ‰åŠŸèƒ½å·²å®ç°å¹¶å¯ä»¥æµ‹è¯•ï¼** ğŸš€

---

*æ›´æ–°å®Œæˆæ—¶é—´: 2026-02-03*  
*ç‰ˆæœ¬: 2.0*  
*çŠ¶æ€: å¯è¿è¡Œ âœ…*
